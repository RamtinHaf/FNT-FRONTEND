import{defineComponent as e,openBlock as n,createBlock as t,createVNode as o,ref as i,resolveComponent as u,computed as r,onMounted as a,nextTick as l,watch as s,pushScopeId as c,popScopeId as d,Fragment as f,renderList as v,renderSlot as m,createCommentVNode as p,toDisplayString as h,resolveDynamicComponent as g,createSlots as y,withScopeId as w,unref as b,onUnmounted as M}from"vue";var x=e({name:"ChevronRightIcon"}),E={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-chevron-right"},C=o("polyline",{points:"9 18 15 12 9 6"},null,-1);x.render=function(e,o,i,u,r,a){return n(),t("svg",E,[C])},x.__file="src/components/icons/ChevRightIcon.vue";var k=e({name:"PlusIcon"}),L={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",class:"feather feather-plus"},A=o("line",{x1:"12",y1:"5",x2:"12",y2:"19"},null,-1),S=o("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);k.render=function(e,o,i,u,r,a){return n(),t("svg",L,[A,S])},k.__file="src/components/icons/PlusIcon.vue";var I=e({name:"PlusIcon"}),D={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",class:"feather feather-minus"},T=o("line",{x1:"5",y1:"12",x2:"19",y2:"12"},null,-1);I.render=function(e,o,i,u,r,a){return n(),t("svg",D,[T])},I.__file="src/components/icons/MinusIcon.vue";var O={primary:"#0080ff",textColor:"#000",menuBgColor:"#fff",textSelectedColor:"#fff",hoverBackground:"#89c4ff"};function _(e){for(var n=void 0,t=e[0],o=1;o<e.length;){var i=e[o],u=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==t)return;"access"===i||"optionalAccess"===i?(n=t,t=u(t)):"call"!==i&&"optionalCall"!==i||(t=u((function(){for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];return t.call.apply(t,[n].concat(e))})),n=void 0)}return t}var j=e({name:"Menu",components:{ChevRightIcon:x,PlusIcon:k,MinusIcon:I},props:{data:{type:Array,default:[]},flip:{type:Boolean,default:!1},onSelection:{type:Function,default:null},onClose:{type:Function,default:null,required:!0},theme:{type:Object,required:!1,default:O},menuStyle:{type:String,default:"slided_out",required:!1}},setup:function(e){var n=i(-1),t=i(e.data.map((function(e){return Object.assign({},e,{id:"menu-item-"+Math.random().toString(16),showSubMenu:!1})}))),o=i(),c=u("Menu"),d=function(n,t,o,i){o?f(t,i):n&&_([e,"optionalAccess",function(e){return e.onSelection},"call",function(e){return e(n)}])},f=function(e,n){t.value=t.value.map((function(t){return Object.assign({},t,{showSubMenu:t.id===e&&!t.showSubMenu,subMenu:n&&t.id===e?{items:_([t,"access",function(e){return e.subMenu},"optionalAccess",function(e){return e.items},"access",function(e){return e.map},"call",function(e){return e((function(e,n){return Object.assign({},e,{selected:0===n})}))}])}:t.subMenu})}))},v=r((function(){return{"--background":e.theme.primary,"--menu-background":e.theme.menuBgColor,"--menu-text-color":e.theme.textColor,"--text-selected-color":e.theme.textSelectedColor,"--hover-background":e.theme.hoverBackground}}));a((function(){_([o,"access",function(e){return e.value},"optionalAccess",function(e){return e.focus},"call",function(e){return e()}]),l((function(){_([e,"access",function(e){return e.data},"access",function(e){return e[0]},"optionalAccess",function(e){return e.selected}])&&(n.value=0)}))}));s(n,(function(e){t.value=t.value.map((function(n,t){return Object.assign({},n,{selected:t===e})}))}));var m=r((function(){return"sub-menu-wrapper "+e.menuStyle})),p=r((function(){return"menu-item-wrapper "+e.menuStyle})),h=r((function(){return"accordion"===e.menuStyle}));return{menuItems:t,handleMenuItemClick:function(e,t,o,i,u,r,a){e.stopPropagation(),e.preventDefault(),r||a||(n.value=u,d(o,t,i,!1))},SubMenuComponent:c,getTheme:v,menuRef:o,handleKeyUp:function(o){o.preventDefault(),o.stopPropagation();var i=n.value,u=t.value[i>-1?i:0],r=o.key,a=e.data.length,l=e.flip;if("ArrowDown"===r)i<a-1?_([t,"access",function(e){return e.value},"access",function(e){return e[i+1]},"optionalAccess",function(e){return e.divider}])?n.value=i+2<a?i+2:0:n.value+=1:i===a-1&&(n.value=0);else if("ArrowUp"===r){var s=_([t,"access",function(e){return e.value},"access",function(e){return e[i-1]},"optionalAccess",function(e){return e.divider}])?i-2:i-1<0?a-1:i-1;n.value=s}else"ArrowLeft"===r?l?u.subMenu&&f(u.id,!0):e.onClose("ArrowLeft"):"Enter"===r?u.subMenu?f(u.id,!0):d(u.name,u.id,!!u.subMenu):"ArrowRight"===r?!l&&u.subMenu?f(u.id,!0):l&&e.onClose("ArrowRight"):"Escape"===r&&e.onClose()},activeIndex:n,handleSubmenuClose:function(){t.value=t.value.map((function(e){return Object.assign({},e,{showSubMenu:!1})})),_([o,"access",function(e){return e.value},"optionalAccess",function(e){return e.focus},"call",function(e){return e()}])},subMenuClass:m,menuItemClass:p,isAccordion:h}}}),B=w("data-v-9bcc0be2");c("data-v-9bcc0be2");var N={key:0,class:"menu-item-icon"},H={key:1,class:"menu-item-divider"};d();var P=B((function(e,i,r,a,l,s){var c=u("chev-right-icon"),d=u("plus-icon"),w=u("minus-icon");return n(),t("div",{ref:"menuRef",class:"menu-wrapper",tabindex:"0",onKeyup:i[2]||(i[2]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleKeyUp&&e.handleKeyUp.apply(e,n)})},[o("ul",{class:"menu-list",style:e.getTheme},[(n(!0),t(f,null,v(e.menuItems,(function(u,r){var a=u.id,l=u.selected,s=u.name,b=u.subMenu,M=u.showSubMenu,x=u.disabled,E=u.divider,C=u.iconSlot;return n(),t("li",{key:a,class:[{"sub-menu":b,selected:l,disabled:x,flip:e.flip,divider:E},"menu-list-item",e.menuStyle],style:e.getTheme,onMousedown:function(n){return e.handleMenuItemClick(n,a,s,b,r,x,E)}},[E?(n(),t("span",H)):(n(),t(f,{key:0},[o("div",{class:e.menuItemClass,onClick:i[1]||(i[1]=function(e){return e.stopPropagation()})},[C?(n(),t("span",N,[m(e.$slots,C)])):p("v-if",!0),o("span",{class:["name",{disabled:x}]},h(s),3),b?(n(),t("span",{key:1,class:["chev-icon",{disabled:x,"show-submenu":M},e.menuStyle]},[e.isAccordion?p("v-if",!0):(n(),t(c,{key:0})),b&&!M&&e.isAccordion?(n(),t(d,{key:1})):p("v-if",!0),b&&M&&e.isAccordion?(n(),t(w,{key:2})):p("v-if",!0)],2)):p("v-if",!0)],2),!x&&M?(n(),t("div",{key:0,class:e.subMenuClass,style:e.getTheme},[(n(),t(g(e.SubMenuComponent),{data:b.items,"on-selection":e.onSelection,theme:e.theme,"on-close":e.handleSubmenuClose,flip:e.flip,"menu-style":e.menuStyle},y({_:2},[v(Object.keys(e.$slots),(function(n){return{name:n,fn:B((function(t){return[m(e.$slots,n,t)]}))}}))]),1032,["data","on-selection","theme","on-close","flip","menu-style"]))],6)):p("v-if",!0)],64))],46,["onMousedown"])})),128))],4)],544)}));j.render=P,j.__scopeId="data-v-9bcc0be2",j.__file="src/components/Menu.vue";var R={name:"XIcon"},K={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-x"},X=o("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),F=o("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1);R.render=function(e,o,i,u,r,a){return n(),t("svg",K,[X,F])},R.__file="src/components/icons/XIcon.vue";var U=e({name:"MenuIcon"}),W={xmlns:"http://www.w3.org/2000/svg",width:"50%",height:"50%",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-menu"},$=o("line",{x1:"3",y1:"12",x2:"21",y2:"12"},null,-1),q=o("line",{x1:"3",y1:"6",x2:"21",y2:"6"},null,-1),Y=o("line",{x1:"3",y1:"18",x2:"21",y2:"18"},null,-1);U.render=function(e,o,i,u,r,a){return n(),t("svg",W,[$,q,Y])},U.__file="src/components/icons/MenuIcon.vue";var z=function(e,n,t,o){var i=e.getBoundingClientRect(),u=i.top,r=i.bottom,a=Math.round((n.clientWidth-t)/2),l=n.clientHeight,s="bottom",c=null;return l>u?(c={top:t+15+"px",left:"-"+a+"px"},s="top"):window.innerHeight-r<l?(c={bottom:t+15+"px",left:"-"+a+"px"},s="bottom"):(c={top:t+15+"px",left:"-"+a+"px"},s="top"),Object.assign({},c,{"min-height":o.height+"px",width:o.width+"px",newOrientation:s})},G=function(e,n,t,o){var i=e.getBoundingClientRect(),u=i.top,r=i.bottom,a=i.left,l=i.right,s=window.innerWidth,c=window.innerHeight,d=o.clientWidth,f=Math.ceil(d/2),v=null,m=!1,p=!1;return t&&(m=!1),r>c&&(v={left:n.left,top:n.top-(r-c)},p=!0),u<0&&(v={left:n.left,top:n.top+Math.abs(u)},p=!0),(a<0||a<f)&&(v={left:f,top:n.top},p=!0),(l>s||s-l<d)&&(v={left:s-d,top:n.top},t&&(m=!0),p=!0),{position:v,flip:m,reveal:p}},V=function(e,n){var t=15,o=t,i=t;switch(e){case"top left":o=t,i=t;break;case"top right":o=window.innerWidth-n-t,i=t;break;case"bottom left":o=t,i=window.innerHeight-n-t;break;case"bottom right":o=window.innerWidth-n-t,i=window.innerHeight-n-t}return{left:o+"px",top:i+"px",width:n+"px",height:n+"px"}},J={dimension:{type:Number,default:45},position:{type:String,default:"bottom right"},fixed:{type:Boolean,default:!1},menuDimension:{type:Object,default:{height:250,width:250}},menuData:{type:Array,default:[]},useCustomContent:{type:Boolean,default:!1},onSelected:{type:Function,default:null},flipOnEdges:{type:Boolean,default:!1},theme:{type:Object,required:!1,default:O},preserveMenuPosition:{type:Boolean,default:!0},menuStyle:{type:String,default:"slide-out",required:!1}};"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Q;(function(e,n){!function(){function e(e){var n=!0,t=!1,o=null,i={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function u(e){return!!(e&&e!==document&&"HTML"!==e.nodeName&&"BODY"!==e.nodeName&&"classList"in e&&"contains"in e.classList)}function r(e){var n=e.type,t=e.tagName;return!("INPUT"!==t||!i[n]||e.readOnly)||"TEXTAREA"===t&&!e.readOnly||!!e.isContentEditable}function a(e){e.classList.contains("focus-visible")||(e.classList.add("focus-visible"),e.setAttribute("data-focus-visible-added",""))}function l(e){e.hasAttribute("data-focus-visible-added")&&(e.classList.remove("focus-visible"),e.removeAttribute("data-focus-visible-added"))}function s(t){t.metaKey||t.altKey||t.ctrlKey||(u(e.activeElement)&&a(e.activeElement),n=!0)}function c(e){n=!1}function d(e){u(e.target)&&(n||r(e.target))&&a(e.target)}function f(e){u(e.target)&&(e.target.classList.contains("focus-visible")||e.target.hasAttribute("data-focus-visible-added"))&&(t=!0,window.clearTimeout(o),o=window.setTimeout((function(){t=!1}),100),l(e.target))}function v(e){"hidden"===document.visibilityState&&(t&&(n=!0),m())}function m(){document.addEventListener("mousemove",h),document.addEventListener("mousedown",h),document.addEventListener("mouseup",h),document.addEventListener("pointermove",h),document.addEventListener("pointerdown",h),document.addEventListener("pointerup",h),document.addEventListener("touchmove",h),document.addEventListener("touchstart",h),document.addEventListener("touchend",h)}function p(){document.removeEventListener("mousemove",h),document.removeEventListener("mousedown",h),document.removeEventListener("mouseup",h),document.removeEventListener("pointermove",h),document.removeEventListener("pointerdown",h),document.removeEventListener("pointerup",h),document.removeEventListener("touchmove",h),document.removeEventListener("touchstart",h),document.removeEventListener("touchend",h)}function h(e){e.target.nodeName&&"html"===e.target.nodeName.toLowerCase()||(n=!1,p())}document.addEventListener("keydown",s,!0),document.addEventListener("mousedown",c,!0),document.addEventListener("pointerdown",c,!0),document.addEventListener("touchstart",c,!0),document.addEventListener("visibilitychange",v,!0),m(),e.addEventListener("focus",d,!0),e.addEventListener("blur",f,!0),e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host?e.host.setAttribute("data-js-focus-visible",""):e.nodeType===Node.DOCUMENT_NODE&&(document.documentElement.classList.add("js-focus-visible"),document.documentElement.setAttribute("data-js-focus-visible",""))}if("undefined"!=typeof window&&"undefined"!=typeof document){var n;window.applyFocusVisiblePolyfill=e;try{n=new CustomEvent("focus-visible-polyfill-ready")}catch(e){(n=document.createEvent("CustomEvent")).initCustomEvent("focus-visible-polyfill-ready",!1,!1,{})}window.dispatchEvent(n)}"undefined"!=typeof document&&e(document)}()})(Q={exports:{}},Q.exports);var Z=e({name:"FloatMenu",components:{Menu:j,XIcon:R,MenuIcon:U},props:J,setup:function(e,n){var t=n.slots,o=i(null),u=i(null),s=i(),c=i(),d=i(!1),f=i(),v=i(null),m=i("top"),p=i(!1),h=i(!1),g=i(!1),y=i(void 0!==window.ontouchstart),w=r((function(){return b(y)?"touchmove":"mousemove"})),x=r((function(){return"touchmove"===b(w)?"accordion":e.menuStyle})),E=r((function(){return V(e.position,e.dimension)})),C=i(!1),k=r((function(){if(o.value){var n=b(o);if(n)return{left:n.left+"px",top:n.top+"px",width:e.dimension+"px",height:e.dimension+"px"}}})),L=function(e){if(d.value){if(C.value&&(o.value=u.value),Array.from(e.target.classList).some((function(e){return"sub-menu"===e||"disabled"===e})))return;d.value=!1}},A=function(){var n=V(e.position,e.dimension);o.value={left:+n.left.replace(/px/gi,""),top:+n.top.replace(/px/gi,"")}},S=function(n){var t=0,i=0;if(n instanceof MouseEvent?(t=n.clientX,i=n.clientY):n instanceof TouchEvent&&(t=n.touches[0].clientX,i=n.touches[0].clientY),h.value){var u=i-Math.round(e.dimension/2);o.value={left:t-Math.round(e.dimension/2),top:u>0&&u<window.innerHeight-e.dimension?u:u<0?0:u-e.dimension}}};a((function(){var n=V(e.position,e.dimension),t={left:+n.left.replace(/px/gi,""),top:+n.top.replace(/px/gi,"")};o.value=t,u.value=t,window.addEventListener("click",L),window.addEventListener("resize",A),window.addEventListener("mouseup",(function(e){var n=e.target.nodeName;("#document"===n||"HTML"===n)&&(g.value=!1,h.value=!1,u.value=o.value)}),{capture:!0}),!e.fixed&&c.value&&document.addEventListener(w.value,S)})),M((function(){window.removeEventListener("click",L),window.removeEventListener("resize",A),document.removeEventListener(w.value,S)}));var I=r((function(){return{"--background":e.theme.primary}})),D=r((function(){return!Object.keys(t).length}));return{dragActive:h,flipMenu:p,getInitStyle:E,getTheme:I,handleMenuClose:function(e){"ArrowLeft"!==e&&"ArrowRight"!==e&&(d.value=!1,C.value&&(o.value=u.value),l((function(){!function(e){for(var n=void 0,t=e[0],o=1;o<e.length;){var i=e[o],u=e[o+1];if(o+=2,("optionalAccess"===i||"optionalCall"===i)&&null==t)return;"access"===i||"optionalAccess"===i?(n=t,t=u(t)):"call"!==i&&"optionalCall"!==i||(t=u((function(){for(var e=[],o=arguments.length;o--;)e[o]=arguments[o];return t.call.apply(t,[n].concat(e))})),n=void 0)}}([s,"access",function(e){return e.value},"optionalAccess",function(e){return e.focus},"call",function(e){return e()}])})))},handleMenuItemSelection:function(n){d.value=!1,e.onSelected&&e.onSelected(n)},slotsEmpty:D,menuOrientation:m,menuActive:d,menuContainer:f,menuHead:s,menuCSS:v,style:k,toggleMenu:function(n){h.value||(n.stopPropagation(),n.preventDefault(),Array.from(n.target.classList).some((function(e){return"menu-list-item"===e}))||(d.value?C.value&&(o.value=u.value):(function(){var n=f.value,t=c.value,o=e.dimension;if(n&&t){var i=z(t,n,o,e.menuDimension);m.value=i.newOrientation,v.value=i}}(),function(n){var t=b(o);if(t&&f.value){var i=G(n,t,e.flipOnEdges,f.value);p.value=i.flip,C.value=i.reveal,i.position&&(o.value=i.position)}}(s.value)),l((function(){d.value=!d.value}))))},menuHeadContainer:c,handleDragStart:function(e){y.value||e.preventDefault(),g.value=!0},handleDragMove:function(){g.value&&(d.value=!1,h.value=!0)},handleDragEnd:function(n){var t=n.clientX,o=n.clientY;h.value&&(u.value={left:t-Math.round(e.dimension/2),top:o-Math.round(e.dimension/2)},setTimeout((function(){h.value=!1}),100)),g.value=!1},computedMenuStyle:x}}}),ee=w("data-v-47323bf2");c("data-v-47323bf2");var ne={class:"menu-head-icon"};d();var te=ee((function(e,i,r,a,l,s){var c=u("MenuIcon"),d=u("XIcon"),f=u("Menu");return n(),t("div",{ref:"menuHeadContainer",class:[{dragActive:e.dragActive},"menu-head-wrapper"],style:e.style,onMousedown:i[3]||(i[3]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragStart&&e.handleDragStart.apply(e,n)}),onMouseup:i[4]||(i[4]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragEnd&&e.handleDragEnd.apply(e,n)}),onMousemove:i[5]||(i[5]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragMove&&e.handleDragMove.apply(e,n)}),onTouchstart:i[6]||(i[6]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragStart&&e.handleDragStart.apply(e,n)}),onTouchend:i[7]||(i[7]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragEnd&&e.handleDragEnd.apply(e,n)}),onTouchmove:i[8]||(i[8]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.handleDragMove&&e.handleDragMove.apply(e,n)}),onClick:i[9]||(i[9]=function(){for(var n=[],t=arguments.length;t--;)n[t]=arguments[t];return e.toggleMenu&&e.toggleMenu.apply(e,n)})},[o("div",{ref:"menuHead",tabindex:"0",class:[{menuActive:e.menuActive,dragActive:e.dragActive},"menu-head"],style:e.getTheme,draggable:"false",onKeyup:i[1]||(i[1]=function(n){return 13===n.keyCode&&e.toggleMenu(n)})},[o("span",ne,[m(e.$slots,"icon"),m(e.$slots,"default"),e.slotsEmpty?(n(),t(c,{key:0})):p("v-if",!0)])],38),o("div",{ref:"menuContainer",class:[{menuActive:e.menuActive},"menu-container"],style:e.menuCSS,draggable:"false"},[o("span",{class:"close-btn",onMousedown:i[2]||(i[2]=function(n){return n.stopPropagation()&&e.handleMenuClose()})},[o(d)],32),e.menuActive?(n(),t(f,{key:0,data:e.menuData,flip:e.flipMenu,"on-selection":e.handleMenuItemSelection,theme:e.theme,"on-close":e.handleMenuClose,"menu-style":e.computedMenuStyle},y({_:2},[v(Object.keys(e.$slots),(function(n){return{name:n,fn:ee((function(t){return[m(e.$slots,n,t)]}))}}))]),1032,["data","flip","on-selection","theme","on-close","menu-style"])):p("v-if",!0)],6)],38)}));Z.render=te,Z.__scopeId="data-v-47323bf2",Z.__file="src/components/index.vue";export{Z as FloatMenu};
